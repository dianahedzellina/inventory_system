<?php
header("Content-Type: application/json");
include '../../database.php';

$user_id = (int)($_GET['user_id'] ?? 0);
if ($user_id <= 0) {
    http_response_code(400);
    echo json_encode(["error" => "Missing user_id"]);
    exit;
}

$stmt = $conn->prepare("SELECT user_id, name, email, department, role FROM users WHERE user_id=? LIMIT 1");
$stmt->bind_param("i", $user_id);
$stmt->execute();

echo json_encode($stmt->get_result()->fetch_assoc() ?: []);
